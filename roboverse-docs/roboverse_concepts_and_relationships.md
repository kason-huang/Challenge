# RoboVerse æ ¸å¿ƒæ¦‚å¿µä¸å…³ç³»å›¾è°±

> **æ¦‚è¿°**: RoboVerse æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„å¤šæ¨¡æ‹Ÿå™¨æœºå™¨äººå­¦ä¹ å¹³å°ï¼Œæœ¬æ–‡æ¡£è¯¦ç»†æè¿°å…¶æ ¸å¿ƒæ¦‚å¿µã€å¯¹è±¡åŠç›¸äº’å…³ç³»ã€‚

---

## ç›®å½•

- [ä¸€ã€æ•´ä½“æ¶æ„è§†å›¾](#ä¸€æ•´ä½“æ¶æ„è§†å›¾)
- [äºŒã€é…ç½®å±‚æ¦‚å¿µ](#äºŒé…ç½®å±‚æ¦‚å¿µ)
- [ä¸‰ã€ä»»åŠ¡å±‚æ¦‚å¿µ](#ä¸‰ä»»åŠ¡å±‚æ¦‚å¿µ)
- [å››ã€ä»¿çœŸå±‚æ¦‚å¿µ](#å››ä»¿çœŸå±‚æ¦‚å¿µ)
- [äº”ã€å­¦ä¹ å±‚æ¦‚å¿µ](#äº”å­¦ä¹ å±‚æ¦‚å¿µ)
- [å…­ã€è¯„æµ‹å±‚æ¦‚å¿µ](#å…­è¯„æµ‹å±‚æ¦‚å¿µ)
- [ä¸ƒã€æ•°æ®æµæ¦‚å¿µ](#ä¸ƒæ•°æ®æµæ¦‚å¿µ)
- [å…«ã€æ ¸å¿ƒå…³ç³»å›¾è°±](#å…«æ ¸å¿ƒå…³ç³»å›¾è°±)

---

## ä¸€ã€æ•´ä½“æ¶æ„è§†å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        RoboVerse ç»Ÿä¸€å¹³å°                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   é…ç½®å±‚      â”‚    â”‚   ä»»åŠ¡å±‚       â”‚    â”‚   ä»¿çœŸå±‚       â”‚    â”‚
â”‚  â”‚  Scenario    â”‚    â”‚  BaseTaskEnv   â”‚    â”‚  BaseSimHandler â”‚    â”‚
â”‚  â”‚  RobotCfg    â”‚    â”‚  TaskRegistry  â”‚    â”‚  Handler(s)    â”‚    â”‚
â”‚  â”‚  Objects     â”‚    â”‚  Checker/Det.   â”‚    â”‚                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   å­¦ä¹ å±‚      â”‚    â”‚   è¯„æµ‹å±‚       â”‚    â”‚   æ•°æ®å±‚        â”‚    â”‚
â”‚  â”‚  IL/VLA/RL   â”‚    â”‚  EvalRunner    â”‚    â”‚  Demos/Trajs   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€é…ç½®å±‚æ¦‚å¿µ

### 2.1 æ ¸å¿ƒé…ç½®ç±»

#### ScenarioCfgï¼ˆåœºæ™¯é…ç½®ï¼‰

**å®šä¹‰**: å®Œæ•´çš„ä»»åŠ¡åœºæ™¯é…ç½®

**å±æ€§**:
```python
@configclass
class ScenarioCfg:
    # === èµ„äº§ç»„ä»¶ ===
    scene: SceneCfg | None           # åœºæ™¯ï¼ˆæ¡Œé¢ã€æˆ¿é—´ç­‰ï¼‰
    robots: list[RobotCfg]          # æœºå™¨äººåˆ—è¡¨
    objects: list[BaseObjCfg]        # åœºæ™¯ç‰©ä½“
    lights: list[BaseLightCfg]        # ç¯å…‰
    cameras: list[BaseCameraCfg]      # ç›¸æœº
    ground: GroundCfg | None          # åœ°é¢
    gs_scene: GSSceneCfg | None    # Gaussian Splattingåœºæ™¯

    # === è¿è¡Œæ—¶é…ç½® ===
    simulator: str = None             # æ¨¡æ‹Ÿå™¨é€‰æ‹©
    num_envs: int = 1               # å¹¶è¡Œç¯å¢ƒæ•°
    headless: bool = False            # æ— å¤´æ¨¡å¼
    env_spacing: float = 1.0          # ç¯å¢ƒé—´è·
    decimation: int = 15              # ç‰©ç†é™é¢‘
    gravity: tuple = (0.0, 0.0, -9.81)  # é‡åŠ›

    # === æ¸²æŸ“é…ç½® ===
    render: RenderCfg                # æ¸²æŸ“å‚æ•°
    sim_params: SimParamCfg           # ç‰©ç†å‚æ•°
```

**ç»„åˆå…³ç³»**:
```
ScenarioCfg
    â”œâ”€â”€ [1..N] RobotCfg          # åŒ…å«å¤šä¸ªæœºå™¨äºº
    â”œâ”€â”€ [0..M] BaseObjCfg         # åŒ…å«å¤šä¸ªç‰©ä½“
    â”œâ”€â”€ [0..K] BaseLightCfg       # åŒ…å«å¤šä¸ªç¯æº
    â”œâ”€â”€ [0..L] BaseCameraCfg       # åŒ…å«å¤šä¸ªç›¸æœº
    â”œâ”€â”€ GroundCfg                   # åœ°é¢é…ç½®
    â””â”€â”€ RenderCfg                   # æ¸²æŸ“é…ç½®
```

**ä½¿ç”¨åœºæ™¯**:
- ç¯å¢ƒåˆ›å»º (`gym.make()`)
- ä»»åŠ¡åˆå§‹åŒ– (`BaseTaskEnv(scenario, device)`)
- å‘é‡åŒ–é…ç½® (`num_envs` å‚æ•°)

---

#### RobotCfgï¼ˆæœºå™¨äººé…ç½®ï¼‰

**å®šä¹‰**: å•ä¸ªæœºå™¨äººçš„å®Œæ•´é…ç½®

**å±æ€§**:
```python
@configclass
class RobotCfg:
    name: str                             # æœºå™¨äººåç§°
    urdf_path: str | None                # URDFæ–‡ä»¶è·¯å¾„
    usd_path: str | None                 # USDæ–‡ä»¶è·¯å¾„
    mjcf_path: str | None                # MJCFæ–‡ä»¶è·¯å¾„
    scale: float = 1.0                      # ç¼©æ”¾å› å­

    # ç‰©ç†å±æ€§
    gripper_open_q: list[float]           # å¤¹çˆªæ‰“å¼€ä½ç½®
    gripper_close_q: list[float]          # å¤¹çˆªå…³é—­ä½ç½®
    joint_limits: dict[str, tuple]       # å…³èŠ‚é™åˆ¶ [min, max]
    ee_body_name: str | None             # æœ«ç«¯æ‰§è¡Œå™¨åç§°

    # åˆå§‹çŠ¶æ€
    fix_base_link: bool = False            # å›ºå®šåŸºåº§
    default_qpos: dict | None            # é»˜è®¤å…³èŠ‚ä½ç½®
    default_pos: dict | None              # é»˜è®¤ä½ç½®
    default_quat: dict | None            # é»˜è®¤å››å…ƒæ•°
```

**ç»„åˆå…³ç³»**:
```
RobotCfg
    â”œâ”€â”€ gripper_open_q: [finger1, finger2, ...]  # å¤¹çˆªå…³èŠ‚
    â”œâ”€â”€ joint_limits: {                        # æ‰€æœ‰å…³èŠ‚é™åˆ¶
    â”‚   "joint1": (-1.57, 1.57),
    â”‚   "joint2": (-1.57, 1.57),
    â”‚   ...
    â”‚   }
    â””â”€â”€ ee_body_name: "panda_hand"           # æœ«ç«¯é“¾æ¥
```

**ä½¿ç”¨åœºæ™¯**:
- Handler åˆ›å»ºæœºå™¨äººå®ä¾‹
- IK æ±‚è§£å™¨é…ç½®
- å…³èŠ‚æ§åˆ¶èŒƒå›´æ£€æŸ¥

---

#### BaseObjCfgï¼ˆç‰©ä½“é…ç½®ï¼‰

**å®šä¹‰**: åœºæ™¯ä¸­å¯æ“ä½œç‰©ä½“çš„åŸºç±»

**å±æ€§**:
```python
class BaseObjCfg:
    name: str                              # ç‰©ä½“åç§°
    position: tuple[float, float, float]    # ä½ç½® [x, y, z]
    rotation: tuple[float, float, float]    # æ—‹è½¬ [w, x, y, z]
    scale: tuple[float, float, float]     # ç¼©æ”¾ [sx, sy, sz]
    mass: float = 1.0                      # è´¨é‡
    collision_enabled: bool = True          # å¯ç”¨ç¢°æ’

    # ç‰©ç†ç±»å‹
    physics: PhysicStateType = PhysicStateType.RIGIDBODY
    fix_base_link: bool = True              # å›ºå®šåŸºåº§é“¾æ¥
```

**å…·ä½“å­ç±»**:
- `PrimitiveCubeCfg` - åŸºç¡€ç«‹æ–¹ä½“
- `PrimitiveCylinderCfg` - åœ†æŸ±ä½“
- `PrimitiveSphereCfg` - çƒä½“
- `MeshObjCfg` - ç½‘æ ¼ç‰©ä½“

---

#### BaseLightCfgï¼ˆç¯å…‰é…ç½®ï¼‰

**å®šä¹‰**: ç¯å…‰å…‰æºé…ç½®

**å±æ€§**:
```python
class BaseLightCfg:
    name: str                              # ç¯å…‰åç§°
    position: tuple[float, float, float]    # ä½ç½®
    rotation: tuple[float, float, float]    # æ—‹è½¬ï¼ˆå››å…ƒæ•°ï¼‰
    intensity: float                        # å¼ºåº¦
    color: tuple[float, float, float]     # RGBé¢œè‰² [0-1]
    radius: float | None                  # åŠå¾„ï¼ˆç‚¹å…‰æºï¼‰
```

**å…·ä½“å­ç±»**:
- `DistantLightCfg` - æ–¹å‘å…‰
- `SphereLightCfg` - çƒé¢ç‚¹å…‰æº
- `DiskLightCfg` - åœ†ç›˜é¢å…‰æº

---

#### BaseCameraCfgï¼ˆç›¸æœºé…ç½®ï¼‰

**å®šä¹‰**: ç›¸æœºä¼ æ„Ÿå™¨é…ç½®

**å±æ€§**:
```python
class BaseCameraCfg:
    name: str                              # ç›¸æœºåç§°
    data_types: list[str]                # æ•°æ®ç±»å‹ ["rgb", "depth", "segmentation"]
    width: int = 256                      # å›¾åƒå®½åº¦
    height: int = 256                     # å›¾åƒé«˜åº¦
    position: tuple[float, float, float]    # ä½ç½®
    rotation: tuple[float, float, float]    # æ—‹è½¬ï¼ˆå››å…ƒæ•°ï¼‰
    look_at: tuple[float, float, float]    # æ³¨è§†ç›®æ ‡
    fov: float = 60                        # è§†åœºè§’
    near: float = 0.01                     # è¿‘è£å‰ªé¢
    far: float = 10.0                      # è¿œè£å‰ªé¢
```

---

### 2.2 åŸŸéšæœºåŒ–é…ç½®

#### DRConfigï¼ˆåŸŸéšæœºåŒ–é…ç½®ï¼‰

**å®šä¹‰**: æ§åˆ¶åŸŸéšæœºåŒ–çš„ç¨‹åº¦å’Œæ–¹å¼

**å±æ€§**:
```python
@dataclass
class DRConfig:
    level: Literal[0, 1, 2, 3] = 0
    """
    éšæœºåŒ–çº§åˆ«ï¼š
    - 0: æ— éšæœºåŒ–
    - 1: åœºæ™¯ + æè´¨éšæœºåŒ–
    - 2: Level 1 + ç¯å…‰éšæœºåŒ–
    - 3: Level 2 + ç›¸æœºéšæœºåŒ–
    """

    scene_mode: Literal[0, 1, 2, 3] = 0
    """
    åœºæ™¯æ¨¡å¼ï¼š
    - 0: æ‰‹åŠ¨å‡ ä½•
    - 1: USD Table + æ‰‹åŠ¨ç¯å¢ƒ
    - 2: USD Scene + USD Table
    - 3: Full USD (Scene + Table + Desktop)
    """

    randomization_seed: int | None = None
    """éšæœºåŒ–ç§å­ï¼ˆNone=éšæœºï¼‰"""
```

**çº§åˆ«è¯¦è§£**:
| Level | åœºæ™¯ | æè´¨ | ç¯å…‰ | ç›¸æœº | æµ‹è¯•èƒ½åŠ› |
|-------|------|------|------|------|----------|
| 0 | âŒ | âŒ | âŒ | âŒ | æ ‡å‡†èƒ½åŠ› |
| 1 | âœ… | âœ… | âŒ | âŒ | æ³›åŒ–èƒ½åŠ› |
| 2 | âœ… | âœ… | âœ… | âŒ | é²æ£’æ€§ |
| 3 | âœ… | âœ… | âœ… | âœ… | è§†è§’ä¸å˜æ€§ |

---

#### DomainRandomizationManagerï¼ˆåŸŸéšæœºåŒ–ç®¡ç†å™¨ï¼‰

**èŒè´£**: ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ç±»å‹çš„éšæœºåŒ–

**æ ¸å¿ƒæ–¹æ³•**:
```python
class DomainRandomizationManager:
    def __init__(self, config: DRConfig, scenario, handler, init_states):
        """åˆå§‹åŒ–DR Manager"""
        self.config = config
        self.scenario = scenario
        self.handler = handler
        self.init_states = init_states

    def apply_randomization(self, demo_idx: int, is_initial: bool):
        """åº”ç”¨åœºæ™¯å’Œæè´¨éšæœºåŒ–"""

    def update_positions_to_table(self, demo_idx: int, env_id: int):
        """æ›´æ–°ç‰©ä½“ä½ç½®ï¼ˆUSDæ¨¡å¼ï¼‰"""

    def update_camera_look_at(self, env_id: int):
        """æ›´æ–°ç›¸æœºæ³¨è§†ç›®æ ‡"""

    def apply_camera_randomization(self):
        """åº”ç”¨ç›¸æœºä½ç½®éšæœºåŒ–"""
```

**ä½¿ç”¨åœºæ™¯**:
- Demo collectionï¼ˆæ¼”ç¤ºæ•°æ®æ”¶é›†ï¼‰
- Policy evaluationï¼ˆç­–ç•¥æ³›åŒ–æµ‹è¯•ï¼‰
- 4çº§æ¸è¿›å¼æ³›åŒ–æµ‹è¯•

---

## ä¸‰ã€ä»»åŠ¡å±‚æ¦‚å¿µ

### 3.1 ä»»åŠ¡åŸºç±»

#### BaseTaskEnvï¼ˆä»»åŠ¡ç¯å¢ƒåŸºç±»ï¼‰

**å®šä¹‰**: æ‰€æœ‰ä»»åŠ¡çš„çˆ¶ç±»ï¼Œå®šä¹‰ä»»åŠ¡æ¥å£å’Œç”Ÿå‘½å‘¨æœŸ

**æ ¸å¿ƒå±æ€§**:
```python
class BaseTaskEnv:
    max_episode_steps = 100        # æœ€å¤§æ­¥æ•°
    traj_filepath = None            # æ¼”ç¤ºè½¨è¿¹è·¯å¾„

    # ç»„ä»¶
    scenario: ScenarioCfg            # åœºæ™¯é…ç½®
    handler: BaseSimHandler        # æ¨¡æ‹Ÿå™¨å¤„ç†å™¨
    num_envs: int                # ç¯å¢ƒæ•°é‡
    device: str                   # è®¾å¤‡

    # å›è°ƒæœºåˆ¶
    pre_physics_step_callback: list[Callable]   # ç‰©ç†æ­¥è¿›å‰
    post_physics_step_callback: list[Callable]  # ç‰©ç†æ­¥è¿›å
    reset_callback: list[Callable]                # é‡ç½®æ—¶
    close_callback: list[Callable]                # å…³é—­æ—¶
```

**å¿…é¡»å®ç°çš„æ–¹æ³•**:
```python
def _observation(self, env_states: Obs) -> Obs:
    """è·å–ç¯å¢ƒè§‚æµ‹"""
    # è¿”å›æœºå™¨äººçŠ¶æ€ã€ç›¸æœºå›¾åƒç­‰
    raise NotImplementedError

def _reward(self, env_states: Obs) -> Reward:
    """è®¡ç®—å¥–åŠ±ä¿¡å·"""
    return torch.zeros(self.num_envs)

def _terminated(self, env_states: Obs) -> Termination:
    """åˆ¤æ–­æ˜¯å¦ç»ˆæ­¢ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰"""
    return torch.zeros(self.num_envs, dtype=torch.bool)

def _time_out(self, env_states) -> torch.Tensor:
    """åˆ¤æ–­æ˜¯å¦è¶…æ—¶"""
    return self._episode_steps >= self.max_episode_steps
```

**å¯é€‰å®ç°çš„æ–¹æ³•**:
```python
def _privileged_observation(self, env_states: Obs) -> Obs:
    """è·å–ç‰¹æƒè§‚æµ‹ï¼ˆRLè®­ç»ƒç”¨ï¼Œå®é™…è¯„æµ‹ä¸å¯ç”¨ï¼‰"""

def _observation_space(self) -> gym.Space:
    """å®šä¹‰è§‚æµ‹ç©ºé—´"""

def _action_space(self) -> gym.Space:
    """å®šä¹‰åŠ¨ä½œç©ºé—´"""

def _extra_spec(self) -> dict[str, BaseQueryType]:
    """é¢å¤–æŸ¥è¯¢è§„èŒƒï¼ˆIKã€æ¥è§¦åŠ›ç­‰ï¼‰"""
```

**ç”Ÿå‘½å‘¨æœŸ**:
```
åˆ›å»º
  â†“
__init__(scenario, device)
  â†“
_prepare_callbacks()
  â†“
_get_initial_states()
  â†“
handler.launch()
  â†“
[å°±ç»ªçŠ¶æ€]
```

---

### 3.2 ä»»åŠ¡æ³¨å†Œç³»ç»Ÿ

#### TaskRegistryï¼ˆä»»åŠ¡æ³¨å†Œè¡¨ï¼‰

**å®šä¹‰**: ç®¡ç†æ‰€æœ‰å·²æ³¨å†Œçš„ä»»åŠ¡

**æ³¨å†Œè£…é¥°å™¨**:
```python
from metasim.task.registry import register_task

@register_task("namespace.name", "task_id")
class MyTask(BaseTaskEnv):
    """ä»»åŠ¡å®ç°"""
    scenario = ScenarioCfg(...)
```

**ä½¿ç”¨åœºæ™¯**:
```python
from metasim.task.registry import get_task_class

# é€šè¿‡IDè·å–ä»»åŠ¡ç±»
task_cls = get_task_class("maniskill.push_cube")

# é€šè¿‡IDè·å–å®Œæ•´åç§°
task_full_name = get_task_full_name("push_cube")

# åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡
all_tasks = list_tasks()
```

**æ³¨å†Œç¤ºä¾‹**:
| å‘½åç©ºé—´ | ä»»åŠ¡ID | ä»»åŠ¡ç±» | è½¨è¿¹è·¯å¾„ |
|----------|---------|---------|-----------|
| `maniskill` | `push_cube` | PushCubeCfg | `roboverse_data/trajs/maniskill/push_cube/v2` |
| `maniskill` | `pick_cube` | PickCubeCfg | `roboverse_data/trajs/maniskill/pick_cube/v2` |
| `libero_90` | `libero_kitchen_scene1` | LiberoKitchenScene1Task | `roboverse_data/trajs/libero_90/...` |

---

### 3.3 æˆåŠŸæ£€æµ‹ç³»ç»Ÿ

#### Checker/Detectorï¼ˆæ£€æµ‹å™¨/æ¢æµ‹ä»ªï¼‰

**å®šä¹‰**: ç”¨äºåˆ¤æ–­ä»»åŠ¡æˆåŠŸæ¡ä»¶çš„ç»„ä»¶

**ç±»å‹å±‚æ¬¡**:
```
BaseQueryType (åŸºç±»)
    â”œâ”€â”€ ContactForceQuery     # æ¥è§¦åŠ›æŸ¥è¯¢
    â”œâ”€â”€ StateQuery            # çŠ¶æ€æŸ¥è¯¢
    â”œâ”€â”€ Relative2DSphereDetector   # 2Dçƒå½¢åŒºåŸŸæ¢æµ‹å™¨
    â”œâ”€â”€ DetectedChecker      # æ£€æµ‹å™¨
    â””â”€â”€ ...
```

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# ç›¸å¯¹ä½ç½®æ¢æµ‹å™¨
detector = Relative2DSphereDetector(
    base_obj_name="goal_region",
    relative_pos=(0.0, 0.0, 0.0),
    radius=0.15,
    axis=(0, 1)  # XYå¹³é¢
)

# æ£€æµ‹å™¨
checker = DetectedChecker(
    detector=detector,
    obj_name="cube"
)

# åœ¨ä»»åŠ¡ä¸­ä½¿ç”¨
def _terminated(self, env_states):
    return checker.check(env_states)
```

**æ£€æµ‹å™¨ç±»å‹**:
- **å‡ ä½•æ£€æµ‹**: ä½ç½®å…³ç³»ã€è·ç¦»ã€è§’åº¦
- **æ¥è§¦æ£€æµ‹**: æ¥è§¦åŠ›ã€ç¢°æ’çŠ¶æ€
- **çŠ¶æ€æ£€æµ‹**: é€Ÿåº¦ã€åŠ é€Ÿåº¦ã€ç¨³å®šæ€§

---

## å››ã€ä»¿çœŸå±‚æ¦‚å¿µ

### 4.1 æ¨¡æ‹Ÿå™¨å¤„ç†å™¨

#### BaseSimHandlerï¼ˆæ¨¡æ‹Ÿå™¨å¤„ç†å™¨åŸºç±»ï¼‰

**å®šä¹‰**: æ‰€æœ‰æ¨¡æ‹Ÿå™¨å®ç°çš„æŠ½è±¡æ¥å£

**æ ¸å¿ƒæ–¹æ³•**:
```python
class BaseSimHandler:
    def __init__(self, scenario, extra_spec):
        """åˆå§‹åŒ–æ¨¡æ‹Ÿå™¨"""
        self.scenario = scenario
        self.robots: list[RobotState] = []
        self.objects: list[ObjectState] = []
        self.lights: list[LightState] = []
        self.cameras: list[CameraState] = []

    def launch(self) -> None:
        """å¯åŠ¨æ¨¡æ‹Ÿå™¨"""
        # åˆ›å»ºæœºå™¨äººã€ç‰©ä½“ã€ç¯å…‰ã€ç›¸æœº
        # åˆå§‹åŒ–ç‰©ç†ä¸–ç•Œ

    def step(self) -> None:
        """ç‰©ç†æ­¥è¿›"""
        # æ‰§è¡Œç‰©ç†ä»¿çœŸ

    def set_dof_targets(self, actions) -> None:
        """è®¾ç½®å…³èŠ‚ç›®æ ‡ä½ç½®"""
        # æ§åˆ¶æœºå™¨äººå…³èŠ‚

    def get_states(self, mode="tensor") -> TensorStates:
        """è·å–å½“å‰çŠ¶æ€"""
        # è¿”å›æœºå™¨äººã€ç‰©ä½“ã€ç¯å…‰ã€ç›¸æœºçŠ¶æ€

    def render(self) -> np.ndarray:
        """æ¸²æŸ“åœºæ™¯"""
        # è¿”å›RGBå›¾åƒ

    def close(self) -> None:
        """å…³é—­æ¨¡æ‹Ÿå™¨"""
        # æ¸…ç†èµ„æº
```

**çŠ¶æ€ç±»å‹**:
```python
class TensorStates:
    robots: dict[str, RobotState]      # æœºå™¨äººçŠ¶æ€
    objects: dict[str, ObjectState]       # ç‰©ä½“çŠ¶æ€
    images: dict[str, np.ndarray]        # ç›¸æœºå›¾åƒ
```

---

### 4.2 æ¨¡æ‹Ÿå™¨ç±»å‹

#### æ”¯æŒçš„æ¨¡æ‹Ÿå™¨

| æ¨¡æ‹Ÿå™¨ | Handlerç±» | å‘é‡åŒ– | æ€§èƒ½ | GPUåŠ é€Ÿ | é€‚ç”¨åœºæ™¯ |
|---------|-----------|--------|------|---------|----------|
| **mujoco** | MujocoHandler | âŒ | ä¸­ç­‰ | âŒ | å¿«é€ŸåŸå‹ |
| **mjx** | MJXHandler | âœ… (JAX) | æå¿« | âœ… (JAX) | å¤§è§„æ¨¡RL |
| **isaacgym** | IsaacGymHandler | âœ… | æå¿« | âœ… (CUDA) | GPUåŠ é€ŸRL |
| **isaaclab** | IsaacLabHandler | âœ… | é«˜ | âœ… (CUDA) | æœ€æ–°æ ˆ |
| **genesis** | GenesisHandler | âœ… | æå¿« | âœ… (CUDA) | ç°ä»£ç‰©ç† |
| **pybullet** | PyBulletHandler | âœ… | ä¸­ç­‰ | âŒ | å…¼å®¹æ€§å¥½ |
| **sapien2** | SAPIEN2Handler | âœ… | é«˜ | âœ… (CUDA) | æ¸²æŸ“ä¼˜å…ˆ |
| **sapien3** | SAPIEN3Handler | âœ… | é«˜ | âœ… (CUDA) | æœ€æ–°ç‰ˆæœ¬ |

**é€‰æ‹©ç­–ç•¥**:
- **è¯„æµ‹**: MuJoCoï¼ˆç¨³å®šã€å…¼å®¹ï¼‰
- **RLè®­ç»ƒ**: IsaacGym æˆ– MJXï¼ˆåŸç”Ÿå‘é‡åŒ–ã€GPUï¼‰
- **é«˜è´¨é‡æ¸²æŸ“**: IsaacLab æˆ– SAPIEN3

---

### 4.3 çŠ¶æ€æ•°æ®ç»“æ„

#### Obsï¼ˆè§‚æµ‹æ•°æ®ï¼‰

**å®šä¹‰**: ç¯å¢ƒè¿”å›çš„å®Œæ•´è§‚æµ‹

**ç»“æ„**:
```python
@dataclass
class Obs:
    robots: dict[str, RobotState]      # æœºå™¨äººçŠ¶æ€
    objects: dict[str, ObjectState]       # ç‰©ä½“çŠ¶æ€
    images: dict[str, np.ndarray]        # ç›¸æœºå›¾åƒ
```

**RobotState å­ç»“æ„**:
```python
class RobotState:
    root_state: Tensor              # æ ¹é“¾æ¥çŠ¶æ€ [pos(3), quat(4)]
    body_state: Tensor               # ä¸»ä½“çŠ¶æ€ [N, 7] (ä½ç½®+æ—‹è½¬ï¼‰
    joint_pos: Tensor               # å…³èŠ‚ä½ç½® [N_dof]
    joint_vel: Tensor               # å…³èŠ‚é€Ÿåº¦ [N_dof]
    joint_acc: Tensor               # å…³èŠ‚åŠ é€Ÿåº¦ [N_dof]
```

**ObjectState å­ç»“æ„**:
```python
class ObjectState:
    root_state: Tensor              # æ ¹é“¾æ¥çŠ¶æ€ [pos(3), quat(4)]
    joint_pos: Tensor               # å…³èŠ‚ä½ç½® [N_dof] (å¦‚æœ‰é“°é“¾ï¼‰
```

---

#### Actionï¼ˆåŠ¨ä½œæ•°æ®ï¼‰

**å®šä¹‰**: æ§åˆ¶åŠ¨ä½œçš„æ•°æ®ç»“æ„

**ç»“æ„**:
```python
# åŠ¨ä½œæ ¼å¼ï¼ˆå­—å…¸åˆ—è¡¨ï¼‰
actions: list[dict] = [
    {
        "robot_name": {
            "dof_pos_target": {
                "joint1": 0.1,
                "joint2": 0.5,
                ...
            }
        }
    },
    ...
]

# æˆ–å¼ é‡æ ¼å¼ï¼ˆå‘é‡åŒ–ï¼‰
actions: Tensor of shape (num_envs, num_dof)
```

---

#### Infoï¼ˆä¿¡æ¯æ•°æ®ï¼‰

**å®šä¹‰**: ç¯å¢ƒè¿”å›çš„é¢å¤–ä¿¡æ¯

**å¸¸ç”¨å­—æ®µ**:
```python
info = {
    "success": Tensor,        # æ˜¯å¦æˆåŠŸï¼ˆæ¯ä¸ªç¯å¢ƒï¼‰
    "episode_info": dict,    # å›åˆä¿¡æ¯
    "metric": dict,          # ä»»åŠ¡ç‰¹å®šæŒ‡æ ‡
    "timestamp": float,       # æ—¶é—´æˆ³
}
```

---

## äº”ã€å­¦ä¹ å±‚æ¦‚å¿µ

### 5.1 ILç­–ç•¥ï¼ˆæ¨¡ä»¿å­¦ä¹ ï¼‰

#### DiffusionPolicyï¼ˆæ‰©æ•£ç­–ç•¥ï¼‰

**å®šä¹‰**: åŸºäºæ‰©æ•£æ¨¡å‹çš„ç­–ç•¥

**ç»„ä»¶**:
```python
class DiffusionPolicy:
    # ç­–ç•¥ç½‘ç»œ
    model: nn.Module

    # é…ç½®
    n_obs_steps: int = 2        # è§‚æµ‹å†å²é•¿åº¦
    n_action_steps: int = 8     # åŠ¨ä½œå—é•¿åº¦
    action_dim: int             # åŠ¨ä½œç»´åº¦
    obs_dim: int               # è§‚æµ‹ç»´åº¦

    # EMAï¼ˆæŒ‡æ•°ç§»åŠ¨å¹³å‡ï¼‰
    ema_model: nn.Module | None
    use_ema: bool = False
```

**æ‰§è¡Œæµç¨‹**:
```
è§‚æµ‹å†å² â†’ å»å™ªè¿‡ç¨‹ â†’ åŠ¨ä½œå— â†’ æ—¶åºèšåˆ â†’ æ‰§è¡Œ
```

**æ—¶åºèšåˆ**:
```
åŠ¨ä½œå— [T, B, N]
    â†“
å†å²åŠ¨ä½œ [1, 2, ...]
    â†“
åŠ æƒå¹³å‡ï¼ˆæŒ‡æ•°æƒé‡ï¼‰
    â†“
å½“å‰åŠ¨ä½œ
```

---

#### ACTPolicyï¼ˆAction Chunking Transformerï¼‰

**å®šä¹‰**: åŸºäºTransformerçš„åŠ¨ä½œåˆ†å—ç­–ç•¥

**ç»„ä»¶**:
```python
class ACTPolicy:
    # Transformerç¼–ç å™¨
    encoder: nn.Module

    # Transformerè§£ç å™¨
    decoder: nn.Module

    # é…ç½®
    chunk_size: int = 100       # åŠ¨ä½œå—å¤§å°
    n_action_steps: int = 8
```

---

### 5.2 VLAç­–ç•¥ï¼ˆè§†è§‰-è¯­è¨€-åŠ¨ä½œï¼‰

#### PiPolicyRunnerï¼ˆPiç­–ç•¥è¿è¡Œå™¨ï¼‰

**å®šä¹‰**: ç‰©ç†æ™ºèƒ½Ï€æ¨¡å‹çš„è¯„æµ‹è¿è¡Œå™¨

**æ¶æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VLA Server   â”‚ (WebSocket)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       v (inference request)
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VLA Client   â”‚ (RoboVerse)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ•°æ®æµ**:
```python
# å®¢æˆ·ç«¯å‘é€
policy_obs = {
    "observation/image": compressed_image,      # 224x224 RGB
    "observation/wrist_image": fake_wrist,        # å ä½
    "observation/state": joint_positions,        # 9ç»´å…³èŠ‚
    "prompt": "Pick up the red cube"           # ä»»åŠ¡æè¿°
}

# æœåŠ¡ç«¯è¿”å›
response = {
    "actions": np.array([              # åŠ¨ä½œå— [chunk, N, 7]
        [dx1, dy1, dz1, drx1, dry1, drz1, gripper1],  # 9D
        [dx2, dy2, dz2, drx2, dry2, drz2, gripper2],
        ...
    ])
}

# è§£ç ä¸ºå…³èŠ‚å‘½ä»¤
dof_pos_target = {
    "joint1": arm_target1,
    "joint2": arm_target2,
    ...
    "gripper": gripper_width          # 2ç»´å¤¹çˆª
}
```

**ç‰¹ç‚¹**:
- **WebSocketé€šä¿¡**: å¼‚æ­¥è¯·æ±‚-å“åº”
- **åŠ¨ä½œç¼“å­˜**: ä¸€æ¬¡è¯·æ±‚å¤šä¸ªåŠ¨ä½œ
- **å¤¹çˆªäºŒå€¼åŒ–**: æŒ‡ä»¤é˜ˆå€¼å¤„ç†

---

#### SmolVLAPolicyï¼ˆSmolVLAç­–ç•¥ï¼‰

**å®šä¹‰**: è½»é‡çº§VLAæ¨¡å‹ï¼ˆHugging Faceï¼‰

**æ¶æ„**:
```
è¾“å…¥: [Image, State, Text]
  â†“
Vision-Language Encoder (ViT + Text Encoder)
  â†“
Action Head (MLP)
  â†“
è¾“å‡º: [dx, dy, dz, drx, dry, drz, gripper]
```

**LeRobotæ ¼å¼**:
```python
batch = {
    "observation.image": tensor[C, H, W, 3],
    "observation.state": tensor[N_dof],
    "observation.language.tokens": token_ids,
    "observation.language.attention_mask": mask
}

action = model.select_action(batch)  # [7] delta
```

**IKé›†æˆ**:
```
VLAè¾“å‡º (EE Delta) + å½“å‰EEå§¿æ€ â†’ IKæ±‚è§£ â†’ å…³èŠ‚ä½ç½®
```

---

### 5.3 RLç­–ç•¥ï¼ˆå¼ºåŒ–å­¦ä¹ ï¼‰

#### Actor-Criticæ¶æ„

**å®šä¹‰**: æ ‡å‡†çš„Actor-Critic RLæ¶æ„

**Actorç½‘ç»œ**:
```python
class Actor(nn.Module):
    # çŠ¶æ€ç¼–ç å™¨
    state_encoder: nn.Sequential
        # MLP: [obs_dim â†’ 128 â†’ 128 â†’ action_dim]

    # è¾“å‡ºå±‚
    action_head: nn.Module
        # Tanhæ¿€æ´» [-1, 1] æˆ–Sigmoid [0, 1]
```

**Criticç½‘ç»œ**:
```python
class Critic(nn.Module):
    # çŠ¶æ€-åŠ¨ä½œç¼–ç å™¨
    state_action_encoder: nn.Sequential
        # MLP: [obs_dim + action_dim â†’ 256 â†’ 128 â†’ 1]

    # Qå€¼è¾“å‡º
    q_head: nn.Module
        # è¾“å‡ºæ ‡é‡Qå€¼
```

**è®­ç»ƒç»„ä»¶**:
- **ç»éªŒå›æ”¾** (Experience Replay Buffer)
- **ç›®æ ‡ç½‘ç»œ** (Target Network)
- **è½¯æ›´æ–°** (Soft Target Update)
- **å½’ä¸€åŒ–å™¨** (Observation Normalizer)

---

### 5.4 å½’ä¸€åŒ–å™¨

#### EmpiricalNormalizationï¼ˆç»éªŒå½’ä¸€åŒ–ï¼‰

**å®šä¹‰**: è¿è¡Œæ—¶ç»Ÿè®¡çš„å½’ä¸€åŒ–

**ç»„ä»¶**:
```python
class EmpiricalNormalization:
    # ç»Ÿè®¡é‡
    mean: Tensor        # è¿è¡Œå‡å€¼ [obs_dim]
    var: Tensor         # è¿è¡Œæ–¹å·® [obs_dim]
    count: int         # æ ·æœ¬è®¡æ•°
    eps: float = 1e-8   # æ•°å€¼ç¨³å®š

    # æ–¹æ³•
    def update(self, obs: Tensor) -> Tensor:
        """æ›´æ–°ç»Ÿè®¡å¹¶å½’ä¸€åŒ–è§‚æµ‹"""
        # å½’ä¸€åŒ–: (obs - mean) / sqrt(var + eps)

    def normalize(self, obs: Tensor) -> Tensor:
        """å½’ä¸€åŒ–è§‚æµ‹ï¼ˆä¸æ›´æ–°ç»Ÿè®¡ï¼‰"""
        return (obs - self.mean) / torch.sqrt(self.var + self.eps)
```

**ä½¿ç”¨åœºæ™¯**:
- RLè®­ç»ƒï¼ˆè¿è¡Œæ—¶å½’ä¸€åŒ–ï¼‰
- RLè¯„æµ‹ï¼ˆä½¿ç”¨è®­ç»ƒæ—¶çš„ç»Ÿè®¡ï¼‰
- ILè¯„æµ‹ï¼ˆé€šå¸¸ä¸ä½¿ç”¨å½’ä¸€åŒ–ï¼‰

---

## å…­ã€è¯„æµ‹å±‚æ¦‚å¿µ

### 6.1 è¯„æµ‹è¿è¡Œå™¨

#### BaseEvalRunnerï¼ˆè¯„æµ‹è¿è¡Œå™¨åŸºç±»ï¼‰

**å®šä¹‰**: æ‰€æœ‰è¯„æµ‹ç­–ç•¥çš„åŸºç±»

**æ ¸å¿ƒæ–¹æ³•**:
```python
class BaseEvalRunner:
    # ç­–ç•¥é…ç½®
    policy_cfg: BasePolicyCfg
        obs_config: ObsCfg            # è§‚æµ‹é…ç½®
        action_config: ActionCfg        # åŠ¨ä½œé…ç½®

    # çŠ¶æ€
    num_envs: int
    device: str
    step: int

    # IKæ±‚è§£å™¨ï¼ˆå¦‚éœ€è¦ï¼‰
    robot_ik: IKSolver | None
    curobo_n_dof: int | None

    # åŠ¨ä½œç¼“å­˜
    action_cache: list

    # åˆå§‹åŒ–
    def _init_policy(self, **kwargs) -> None:
        """åˆå§‹åŒ–ç­–ç•¥ï¼ˆå­ç±»å®ç°ï¼‰"""

    def __post_init__(self) -> None:
        """åå¤„ç†ï¼šè®¾ç½®IKã€æ—¶åºèšåˆç­‰"""
```

**å­ç±»ç±»å‹**:
- `DefaultEvalRunner` - æ‰©æ•£ç­–ç•¥è¯„æµ‹
- `PiPolicyRunner` - Piç­–ç•¥è¯„æµ‹
- `SmolVLARunner` - SmolVLAè¯„æµ‹

---

#### DefaultEvalRunnerï¼ˆé»˜è®¤è¯„æµ‹è¿è¡Œå™¨ï¼‰

**èŒè´£**: æ”¯æŒæ‰©æ•£ç­–ç•¥çš„è¯„æµ‹

**å¤„ç†æµç¨‹**:
```python
def process_obs(self, obs):
    """å¤„ç†è§‚æµ‹"""
    # 1. å›¾åƒå¤„ç†ï¼ˆå½’ä¸€åŒ–æˆ–åŸå§‹ï¼‰
    if norm_image:
        obs_dict["head_cam"] = obs["rgb"].permute(0, 3, 1, 2) / 255.0
    else:
        obs_dict["head_cam"] = obs["rgb"]

    # 2. çŠ¶æ€æå–
    if obs_type == "joint_pos":
        obs_dict["agent_pos"] = obs["joint_qpos"]
    elif obs_type == "ee":
        # æœ«ç«¯æ‰§è¡Œå™¨çŠ¶æ€ï¼ˆç›¸å¯¹åæ ‡ï¼‰
        obs_dict["agent_pos"] = ee_state_local

def predict_action(self, obs):
    """é¢„æµ‹åŠ¨ä½œå—"""
    action_chunk = self.policy.predict_action(obs)  # [T, B, N, A]
    return action_chunk

def get_action(self, obs):
    """è·å–å•ä¸ªå¯æ‰§è¡ŒåŠ¨ä½œ"""
    if len(action_cache) > 0:
        return action_cache.pop(0)
    else:
        processed_obs = self.process_obs(obs)
        action_chunk = self.predict_action(processed_obs)

        if temporal_agg:
            curr_action = get_temporal_agg_action(action_chunk)
        else:
            self.action_cache = process_action(action_chunk, obs)
            return action_cache.pop(0)
```

**æ—¶åºèšåˆ**:
```python
def get_temporal_agg_action(self, action_chunk):
    """
    å†å²åŠ¨ä½œ [1, 2, ..., T]
                â†“
    æŒ‡æ•°åŠ æƒå¹³å‡ (e^{-k * i})
                â†“
    å½“å‰åŠ¨ä½œ
    """
    weights = torch.exp(-self.k * time_indices)
    weights = weights / weights.sum()

    weighted_actions = action_chunk * weights.unsqueeze(-1)
    curr_action = weighted_actions.sum(dim=0)

    return curr_action
```

---

### 6.2 è§‚æµ‹ä¸è½¨è¿¹ä¿å­˜

#### ObsSaverï¼ˆè§‚æµ‹ä¿å­˜å™¨ï¼‰

**å®šä¹‰**: è‡ªåŠ¨ä¿å­˜è§†é¢‘å’Œè§‚æµ‹æ•°æ®

**ç»„ä»¶**:
```python
class ObsSaver:
    video_path: str          # è§†é¢‘è¾“å‡ºè·¯å¾„
    frames: list[np.ndarray]  # è§†é¢‘å¸§
    fps: int = 30             # å¸§ç‡

    def add(self, obs):
        """æ·»åŠ è§‚æµ‹å¸§"""

    def save(self):
        """ä¿å­˜ä¸ºMP4è§†é¢‘"""
        # ä½¿ç”¨imageioç¼–ç ä¿å­˜
```

**è¾“å‡ºæ ¼å¼**:
```
output_dir/
â”œâ”€â”€ episode_001.mp4
â”œâ”€â”€ episode_002.mp4
â”œâ”€â”€ episode_003.mp4
â””â”€â”€ ...
```

---

#### TrajectorySaverï¼ˆè½¨è¿¹ä¿å­˜å™¨ï¼‰

**å®šä¹‰**: ä¿å­˜å®Œæ•´è½¨è¿¹ç”¨äºé‡æ”¾

**v2æ ¼å¼**:
```python
trajs = {
    robot_name: [
        {
            "init_state": {
                "object1": {
                    "pos": [x, y, z],
                    "rot": [w, x, y, z],
                    "dof_pos": {"joint1": q1, ...}
                },
                ...
            },
            "actions": [
                {"dof_pos_target": {...}},
                {"dof_pos_target": {...}},
                ...
            ],
            "states": [  # å¯é€‰ï¼Œå®Œæ•´çŠ¶æ€
                {
                    "object1": {"pos": [...], "rot": [...]},
                    ...
                },
                ...
            ]
        }
    ]
}
```

**ä¿å­˜é€‰é¡¹**:
- `save_states=True`: ä¿å­˜å®Œæ•´çŠ¶æ€ï¼ˆç²¾ç¡®é‡æ”¾ï¼‰
- `save_states=False`: ä»…ä¿å­˜åŠ¨ä½œï¼ˆèŠ‚çœç©ºé—´ï¼‰

---

## ä¸ƒã€æ•°æ®æµæ¦‚å¿µ

### 7.1 é…ç½®æ•°æ®æµ

```
å‘½ä»¤è¡Œå‚æ•°
    â†“
argparse / tyro
    â†“
ScenarioCfg.update(**kwargs)
    â†“
__post_init__()
    â†“
è§£æå­—ç¬¦ä¸²é…ç½® â†’ ä¸‹è½½å¤–éƒ¨èµ„äº§
```

**ç¤ºä¾‹**:
```bash
# å‘½ä»¤è¡Œ
python evaluate.py \
    --task pick_butter \
    --robot franka \
    --sim mujoco \
    --level 2

# é…ç½®é“¾
ScenarioCfg(
    robots=["franka"],           # å­—ç¬¦ä¸² â†’ RobotCfgå¯¹è±¡
    simulator="mujoco"           # å­—ç¬¦ä¸² â†’ SimTypeæšä¸¾
    level=2                      # DRConfig
)
```

---

### 7.2 è¯„æµ‹æ•°æ®æµ

```
Policy Runner
    â†“
process_obs(obs)
    â†“
predict_action(processed_obs)
    â†“
get_action() æˆ– infer_action()
    â†“
{robot_name: {"dof_pos_target": {...}}}
    â†“
env.step(actions)
    â†“
obs, reward, terminated, truncated, info
```

**æ•°æ®è½¬æ¢**:
```
Obs (Tensorç»“æ„)
    â†“
æå–
    â”œâ”€ robots[name].joint_pos    â†’ policyè¾“å…¥
    â”œâ”€ cameras[name].rgb          â†’ policyè¾“å…¥
    â””â”€ objects[name].root_state   â†’ successåˆ¤æ–­

Action (å­—å…¸åˆ—è¡¨)
    â†“
æ„é€ 
    â””â”€ [{robot_name: {"dof_pos_target": dict}}]
```

---

### 7.3 åŸŸéšæœºåŒ–æ•°æ®æµ

```
DomainRandomizationManager
    â†“
apply_randomization()
    â”œâ”€ scene_randomizer.randomize_scene()
    â”œâ”€ material_randomizer.randomize_material()
    â””â”€ light_randomizer.randomize_light()
    â†“
æ›´æ–° handler ä¸­çš„ç‰©ä½“/ç¯å…‰å±æ€§
    â†“
update_positions_to_table()
    â†“
update_camera_look_at()
    â†“
é‡ç½®ç¯å¢ƒ
```

**éšæœºåŒ–ç»„ä»¶**:
```
SceneRandomizer
    â”œâ”€ GeometryRandomizer (å‡ ä½•)
    â”œâ”€ TextureRandomizer (çº¹ç†)
    â””â”€ MaterialRandomizer (æè´¨)

LightRandomizer
    â”œâ”€ ColorRandomizer (é¢œè‰²)
    â”œâ”€ IntensityRandomizer (å¼ºåº¦)
    â””â”€ PositionRandomizer (ä½ç½®)

CameraRandomizer
    â”œâ”€ PositionRandomizer (ä½ç½®)
    â””â”€ LookAtRandomizer (æ³¨è§†)
```

---

## å…«ã€æ ¸å¿ƒå…³ç³»å›¾è°±

### 8.1 ç»„åˆå…³ç³»ï¼ˆCompositionï¼‰

```
ScenarioCfg (ç»„åˆæ ¹)
â”œâ”€ [N] RobotCfg          # 1å¯¹å¤šå…³ç³»
â”œâ”€ [M] BaseObjCfg         # 1å¯¹å¤šå…³ç³»
â”œâ”€ [K] BaseLightCfg       # 1å¯¹å¤šå…³ç³»
â”œâ”€ [L] BaseCameraCfg       # 1å¯¹å¤šå…³ç³»
â”œâ”€ GroundCfg                # 1å¯¹1å…³ç³»
â””â”€ RenderCfg                # 1å¯¹1å…³ç³»
```

---

### 8.2 ç»§æ‰¿å…³ç³»ï¼ˆInheritanceï¼‰

```
é…ç½®ç»§æ‰¿æ ‘
â”œâ”€ BaseObjCfg
â”‚   â”œâ”€ PrimitiveCubeCfg
â”‚   â”œâ”€ PrimitiveCylinderCfg
â”‚   â”œâ”€ MeshObjCfg
â”‚   â””â”€ ...
â”œâ”€ BaseLightCfg
â”‚   â”œâ”€ DistantLightCfg
â”‚   â”œâ”€ SphereLightCfg
â”‚   â”œâ”€ DiskLightCfg
â”‚   â””â”€ ...
â””â”€ BaseCameraCfg
    â””â”€ (ç›®å‰æ— å­ç±»)

ä»»åŠ¡ç»§æ‰¿æ ‘
â”œâ”€ BaseTaskEnv
â”‚   â”œâ”€ ManiskillBaseTask
â”‚   â”‚   â”œâ”€ PushCubeCfg
â”‚   â”‚   â”œâ”€ PickCubeCfg
â”‚   â”‚   â””â”€ ...
â”‚   â”œâ”€ Libero90BaseTask
â”‚   â”‚   â”œâ”€ LiberoKitchenScene1Task
â”‚   â”‚   â””â”€ ...
â”‚   â””â”€ LeggedRobotTask
â”‚       â”œâ”€ WalkTask
â”‚       â””â”€ ...

è¯„æµ‹ç»§æ‰¿æ ‘
â”œâ”€ BaseEvalRunner
â”‚   â”œâ”€ DefaultEvalRunner
â”‚   â”œâ”€ PiPolicyRunner
â”‚   â””â”€ SmolVLARunner
```

---

### 8.3 ä¾èµ–å…³ç³»ï¼ˆDependencyï¼‰

#### ç¯å¢ƒ â†’ æ¨¡æ‹Ÿå™¨

```
ScenarioCfg
    â†“
get_sim_handler_class(SimType)
    â†“
BaseSimHandler.__init__(scenario, extra_spec)
    â†“
handler.launch()
```

**ä¾èµ–è§„åˆ™**:
- `scenario` å¿…é¡»åœ¨ `handler` åˆ›å»ºå‰å®Œå…¨é…ç½®
- `extra_spec` æä¾›æ¨¡æ‹Ÿå™¨ç‰¹å®šå‚æ•°
- Handler å¿…é¡»å®ç°æ‰€æœ‰ `BaseSimHandler` æ–¹æ³•

---

#### ä»»åŠ¡ â†’ ç¯å¢ƒ

```
get_task_class(task_name)
    â†“
task_cls = TaskClass  # å¦‚ PushCubeCfg
    â†“
task_cls.scenario  # ç±»å±æ€§æˆ–æ„é€ å‚æ•°
    â†“
BaseTaskEnv(task_scenario, device)
```

**æ•°æ®æµ**:
```
ä»»åŠ¡é…ç½® â†’ ä»»åŠ¡ç±» â†’ ä»»åŠ¡å®ä¾‹ â†’ Handler â†’ çŠ¶æ€/åŠ¨ä½œ
```

---

#### ç­–ç•¥ â†’ ç¯å¢ƒ

```
PolicyRunner
    â†“
process_obs(obs)
    â†“
predict_action(obs)
    â†“
get_action(obs)
    â†“
action_dict = {robot_name: {"dof_pos_target": dict}}
    â†“
env.step(action_dict)
```

**åŠ¨ä½œæ ¼å¼åŒ¹é…**:
- ILç­–ç•¥: è¾“å‡ºå…³èŠ‚ä½ç½®
- VLAç­–ç•¥: è¾“å‡ºæœ«ç«¯å¢é‡ + IKæ±‚è§£
- RLç­–ç•¥: è¾“å‡ºå…³èŠ‚é€Ÿåº¦æˆ–ä½ç½®

---

#### æ£€æµ‹å™¨ â†’ ä»»åŠ¡

```
BaseQueryType (æ£€æµ‹å™¨åŸºç±»)
    â”œâ”€ Relative2DSphereDetector
    â”œâ”€ ContactForceQuery
    â””â”€ ...
    â†“
check(handler.get_states())
    â†“
DetectedChecker(detector, obj_name)
    â†“
åœ¨ _terminated() ä¸­ä½¿ç”¨
```

**æ£€æµ‹æµç¨‹**:
```
env_states â†’ detector.check() â†’ bool (success/failed)
```

---

### 8.4 ç”Ÿå‘½å‘¨æœŸå…³ç³»ï¼ˆLifecycleï¼‰

#### ç¯å¢ƒç”Ÿå‘½å‘¨æœŸ

```
åˆ›å»ºé˜¶æ®µ
    â†“
__init__(scenario, device)
    â†“
_prepare_callbacks()
    â†“
_get_initial_states()
    â†“
handler.launch()
    â†“
[å°±ç»ª]

è¿è¡Œé˜¶æ®µ
    â†“
for step in range(max_steps):
    pre_physics_step_callback()
    â†“
    set_dof_targets(actions)
    â†“
    handler.step()
    â†“
    post_physics_step_callback()
    â†“
    obs, reward, terminated, time_out = check()
    â†“
    if terminated or time_out:
        break

é‡ç½®é˜¶æ®µ
    â†“
reset()
    â†“
[æ–°å›åˆ]

é”€æ¯é˜¶æ®µ
    â†“
close()
    â†“
_cleanup()
    â†“
[èµ„æºé‡Šæ”¾]
```

---

#### è¯„æµ‹ç”Ÿå‘½å‘¨æœŸ

```
åˆå§‹åŒ–
    â†“
eval_runner._init_policy(**kwargs)
    â†“
randomization_manager.apply_randomization()
    â†“
env.reset()
    â†“
eval_runner.reset()

è¯„æµ‹å¾ªç¯
    â†“
for ep in range(num_episodes):
    for step in range(max_steps):
        obs, reward, terminated, truncated = env.step(actions)
        â†“
        obs_saver.add(obs)
        â†“
        if terminated or truncated:
            break

ç»Ÿè®¡è¾“å‡º
    â†“
compute_mean_std(episode_returns)
    â†“
compute_success_rate(episode_successes)
    â†“
save_json_report()
    â†“
save_video()

ç»“æŸ
    â†“
env.close()
    â†“
eval_runner.close()
```

---

### 8.5 æ•°æ®è½¬æ¢å…³ç³»ï¼ˆData Transformationï¼‰

#### è§‚æµ‹è½¬æ¢

```
Obs (åŸå§‹)
    â†“
ObsSaver.add(obs)
    â†“
np.ndarray (è§†é¢‘å¸§)
    â†“
ObsSaver.save()
    â†“
MP4æ–‡ä»¶ (H.264ç¼–ç )
```

#### åŠ¨ä½œè½¬æ¢

```
Policy Output
    â†“
[IL] action_chunk [T, B, N, A]
    â†“
æ—¶åºèšåˆ (å¯é€‰)
    â†“
å•ä¸ªåŠ¨ä½œ [B, N, A] æˆ– [N_dof]
    â†“
[VLA] IKæ±‚è§£
    â†“
å…³èŠ‚ä½ç½® [N_dof]
    â†“
dof_pos_target: dict
```

#### çŠ¶æ€è½¬æ¢

```
Handler States
    â†“
get_states(mode="tensor")
    â†“
TensorStates
    â”œâ”€ robots[name].joint_pos
    â”œâ”€ objects[name].root_state
    â””â”€ images[name].rgb
    â†“
æå–åˆ°å­—å…¸æˆ–åµŒå¥—ç»“æ„
```

---

## ä¹ã€æ ¸å¿ƒæ¦‚å¿µè¡¨

### 9.1 æ ¸å¿ƒå®ä½“

| æ¦‚å¿µ | ç±»å‹ | å®šä¹‰ | èŒè´£ |
|------|------|------|--------|
| **ScenarioCfg** | é…ç½®ç±» | åœºæ™¯å®Œæ•´é…ç½® |
| **RobotCfg** | é…ç½®ç±» | æœºå™¨äººé…ç½® |
| **BaseObjCfg** | é…ç½®ç±» | ç‰©ä½“é…ç½® |
| **BaseLightCfg** | é…ç½®ç±» | ç¯å…‰é…ç½® |
| **BaseCameraCfg** | é…ç½®ç±» | ç›¸æœºé…ç½® |
| **BaseTaskEnv** | ä»»åŠ¡ç±» | ä»»åŠ¡åŸºç±» |
| **BaseSimHandler** | å¤„ç†å™¨ | æ¨¡æ‹Ÿå™¨å¤„ç†å™¨æ¥å£ |
| **BaseEvalRunner** | è¯„æµ‹ç±» | è¯„æµ‹è¿è¡Œå™¨åŸºç±» |
| **DRConfig** | é…ç½®ç±» | åŸŸéšæœºåŒ–é…ç½® |
| **DomainRandomizationManager** | ç®¡ç†å™¨ | åŸŸéšæœºåŒ–ç®¡ç†å™¨ |
| **ObsSaver** | å·¥å…·ç±» | è§‚æµ‹/è§†é¢‘ä¿å­˜ |
| **DiffusionPolicy** | æ¨¡å‹ç±» | æ‰©æ•£ç­–ç•¥æ¨¡å‹ |
| **Actor-Critic** | æ¨¡å‹ç±» | RLç­–ç•¥ç½‘ç»œ |

---

### 9.2 æ ¸å¿ƒæ•°æ®ç»“æ„

| æ•°æ®ç»“æ„ | å½¢çŠ¶ | ç”¨é€” |
|----------|------|------|
| **Obs** | ç»“æ„åŒ– | ç¯å¢ƒè§‚æµ‹ |
| **Action** | dictæˆ–Tensor | æ§åˆ¶åŠ¨ä½œ |
| **Reward** | Tensor[N] | å¥–åŠ±ä¿¡å· |
| **Termination** | Tensor[N, bool] | ç»ˆæ­¢æ ‡å¿— |
| **Info** | dict | é¢å¤–ä¿¡æ¯ |
| **TensorStates** | ç»“æ„åŒ– | å®Œæ•´çŠ¶æ€ |

---

### 9.3 æ ¸å¿ƒæ–¹æ³•

| æ–¹æ³• | æ‰€åœ¨ç±» | åŠŸèƒ½ | é¢‘ç‡ |
|------|----------|------|--------|
| **reset()** | BaseTaskEnv | é‡ç½®ç¯å¢ƒ | å›åˆå¼€å§‹ |
| **step()** | BaseTaskEnv | æ­¥è¿›ç¯å¢ƒ | æ¯å¸§ |
| **render()** | BaseTaskEnv | æ¸²æŸ“åœºæ™¯ | å¯é€‰ |
| **predict_action()** | BaseEvalRunner | é¢„æµ‹åŠ¨ä½œ | æ¯æ­¥ |
| **get_action()** | BaseEvalRunner | è·å–åŠ¨ä½œ | æ¯æ­¥ |
| **check()** | BaseQueryType | æˆåŠŸæ£€æµ‹ | æ¯æ­¥ |
| **normalize()** | EmpiricalNormalization | å½’ä¸€åŒ– | è®­ç»ƒ/è¯„æµ‹ |
| **launch()** | BaseSimHandler | å¯åŠ¨æ¨¡æ‹Ÿå™¨ | ä¸€æ¬¡ |

---

## åã€æ¦‚å¿µå…³ç³»æ€»ç»“

### 10.1 åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç”¨æˆ·å±‚               â”‚
â”‚  - å‘½ä»¤è¡Œå‚æ•°                         â”‚
â”‚  - JSON/YAMLé…ç½®                      â”‚
â”‚  - ä»»åŠ¡ID                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            é…ç½®å±‚                    â”‚
â”‚  - ScenarioCfg                         â”‚
â”‚  - DRConfig                            â”‚
â”‚  - ä»»åŠ¡æ³¨å†Œ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ä»»åŠ¡å±‚                     â”‚
â”‚  - BaseTaskEnv (å­ç±»å®ç°)          â”‚
â”‚  - Checker/Detector                  â”‚
â”‚  - å¥–åŠ±/ç»ˆæ­¢é€»è¾‘                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ä»¿çœŸå±‚                    â”‚
â”‚  - BaseSimHandler (å®ç°ç±»)           â”‚
â”‚  - Mujoco/IsaacGym/Genesisç­‰        â”‚
â”‚  - çŠ¶æ€æŸ¥è¯¢ç³»ç»Ÿ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          å­¦ä¹ å±‚                    â”‚
â”‚  - IL (Diffusion/ACT)              â”‚
â”‚  - VLA (Pi0/SmolVLA)               â”‚
â”‚  - RL (Actor-Critic)                 â”‚
â”‚  - å½’ä¸€åŒ–å™¨                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          è¯„æµ‹å±‚                    â”‚
â”‚  - BaseEvalRunner (å­ç±»)           â”‚
â”‚  - ObsSaver                            â”‚
â”‚  - TrajectorySaver                     â”‚
â”‚  - åŸŸéšæœºåŒ–ç®¡ç†å™¨                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          æ•°æ®å±‚                    â”‚
â”‚  - Demos (æ¼”ç¤ºæ•°æ®)                   â”‚
â”‚  - Trajectories (è½¨è¿¹)                â”‚
â”‚  - Checkpoints (æ¨¡å‹æƒé‡)             â”‚
â”‚  - Videos (è¯„æµ‹è§†é¢‘)                   â”‚
â”‚  - JSON Reports (è¯„æµ‹æŠ¥å‘Š)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 10.2 å…³é”®æµç¨‹

#### ç¯å¢ƒåˆ›å»ºæµç¨‹

```
ä»»åŠ¡ID
  â†“
get_task_class()
  â†“
task_cls.scenario (è·å–åœºæ™¯é…ç½®)
  â†“
ScenarioCfg.update(**kwargs) (æ›´æ–°é…ç½®)
  â†“
get_sim_handler_class()
  â†“
handler = HandlerClass(scenario)
  â†“
handler.launch() (å¯åŠ¨æ¨¡æ‹Ÿå™¨)
  â†“
env = GymEnvWrapper(task_cls, scenario)
```

---

#### ILè¯„æµ‹æµç¨‹

```
checkpointè·¯å¾„
  â†“
åŠ è½½checkpoint (torch.load)
  â†“
åˆå§‹åŒ–DiffusionPolicy
  â†“
policy.eval() (è®¾ç½®ä¸ºè¯„æµ‹æ¨¡å¼)
  â†“
for episode in num_episodes:
    env.reset()
    runner.reset()
    for step in max_steps:
        obs = env.step(action)  # ä¸Šä¸€æ­¥
        processed_obs = process_obs(obs)  # å¤„ç†è§‚æµ‹
        action_chunk = policy.predict_action(processed_obs)  # é¢„æµ‹åŠ¨ä½œå—
        if temporal_agg:
            action = temporal_agg(action_chunk)  # æ—¶åºèšåˆ
        else:
            action = action_chunk[0]  # ä½¿ç”¨å—ä¸­ç¬¬ä¸€ä¸ª
        obs, reward, terminated, truncated = env.step(action)
        obs_saver.add(obs)
        if terminated or truncated:
            break
    compute_stats()
```

---

#### VLAè¯„æµ‹æµç¨‹

```
æ¨¡å‹è·¯å¾„
  â†“
åŠ è½½SmolVLAPolicy/PiClient
  â†“
for episode in num_episodes:
    randomization_manager.apply_randomization()
    env.reset()
    runner.reset()
    for step in max_steps:
        obs = env.step(action)
        policy_obs = build_policy_observation(obs)  # æ„å»ºè§‚æµ‹
        if cache_empty:
            action_chunk = client.infer(policy_obs)  # è¯·æ±‚VLA
            update_cache(action_chunk)
        action = get_cached_action()  # è·å–ç¼“å­˜çš„åŠ¨ä½œ
        if use_ik:
            action = solve_ik(action)  # IKæ±‚è§£
        obs, reward, terminated, truncated = env.step(action)
        obs_saver.add(obs)
        if terminated or truncated:
            break
    compute_stats()
```

---

#### RLè¯„æµ‹æµç¨‹

```
checkpointè·¯å¾„
  â†“
åŠ è½½Actorå’ŒObsNormalizer
  â†“
actor.eval(), obs_normalizer.eval()
  â†“
for episode in num_episodes:
    env.reset()
    for step in max_steps:
        norm_obs = obs_normalizer.normalize(obs)  # å½’ä¸€åŒ–
        action = actor(norm_obs)  # é¢„æµ‹åŠ¨ä½œ
        obs, reward, terminated, truncated = env.step(action)
        if terminated or truncated:
            break
    compute_stats()
```

---

## åä¸€ã€è®¾è®¡æ¨¡å¼æ€»ç»“

### 11.1 æ¨¡å¼è¯†åˆ«

| æ¨¡å¼ | åº”ç”¨ä½ç½® | è¯´æ˜ |
|--------|----------|------|
| **ç­–ç•¥æ¨¡å¼** | BaseEvalRunner | æ”¯æŒå¤šç§ç­–ç•¥ç±»å‹ï¼Œç»Ÿä¸€æ¥å£ |
| **å·¥å‚æ¨¡å¼** | get_task_class + TaskRegistry | åŠ¨æ€ä»»åŠ¡æ³¨å†Œå’Œåˆ›å»º |
| **å¤„ç†å™¨æ¨¡å¼** | BaseSimHandler + å…·ä½“å®ç° | ç»Ÿä¸€æ¨¡æ‹Ÿå™¨æ¥å£ |
| **è§‚å¯Ÿè€…æ¨¡å¼** | å›è°ƒæœºåˆ¶ | pre/post physics stepå›è°ƒ |
| **åŒ…è£…å™¨æ¨¡å¼** | GymEnvWrapper | ç»Ÿä¸€Gym API |
| **éšæœºåŒ–æ¨¡å¼** | DomainRandomizationManager | ç»Ÿä¸€éšæœºåŒ–ç®¡ç† |

---

### 11.2 æ ¸å¿ƒè®¾è®¡åŸåˆ™

1. **é…ç½®ä¼˜å…ˆ**: é€šè¿‡é…ç½®ç±»æ§åˆ¶æ‰€æœ‰è¡Œä¸º
2. **ç±»å‹å®‰å…¨**: ä½¿ç”¨Pydantic/dataclassé…ç½®éªŒè¯
3. **æ¥å£æŠ½è±¡**: é€šè¿‡åŸºç±»å®šä¹‰æœ€å°æ¥å£
4. **æ¨¡å—åŒ–**: æ¯ä¸ªç»„ä»¶ç‹¬ç«‹å¯æ›¿æ¢
5. **å‘é‡åŒ–**: æ”¯æŒå¤šç¯å¢ƒå¹¶è¡ŒåŠ é€Ÿ
6. **å¯æ‰©å±•**: é€šè¿‡è£…é¥°å™¨æ³¨å†Œæ–°ä»»åŠ¡
7. **è·¨æ¨¡æ‹Ÿå™¨**: æŠ½è±¡Handleræ”¯æŒ8+æ¨¡æ‹Ÿå™¨

---

## æ€»ç»“

RoboVerse çš„æ ¸å¿ƒè®¾è®¡å“²å­¦æ˜¯ï¼š

**ğŸ¯ ç»Ÿä¸€æ€§**: å•ä¸€å¹³å°æ”¯æŒå¤šç§æ¨¡æ‹Ÿå™¨å’Œç®—æ³•
**ğŸ”Œ çµæ´»æ€§**: é…ç½®é©±åŠ¨çš„å¯æ‰©å±•æ¶æ„
**âš¡ é«˜æ•ˆæ€§**: åŸç”Ÿå‘é‡åŒ–å’ŒGPUåŠ é€Ÿ
**ğŸ¨ å¯è§†åŒ–**: å†…ç½®è§†é¢‘å½•åˆ¶å’Œè½¨è¿¹ä¿å­˜
**ğŸ² æ³›åŒ–èƒ½åŠ›**: 4çº§åŸŸéšæœºåŒ–æµ‹è¯•
**ğŸ“Š æ ‡å‡†åŒ–**: Gymnasium APIå’Œç»Ÿä¸€è¯„æµ‹æŒ‡æ ‡
**ğŸ§© æ¨¡å—åŒ–**: æ¸…æ™°çš„å±‚æ¬¡å’ŒèŒè´£åˆ†ç¦»

è¿™äº›æ¦‚å¿µå’Œå…³ç³»æ„æˆäº†RoboVerseä½œä¸ºç»Ÿä¸€æœºå™¨äººå­¦ä¹ å¹³å°çš„åŸºç¡€æ¶æ„ã€‚
